<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wirepas Single-MCU SDK: Using a dedicated area in flash</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Wirepas Single-MCU SDK"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../small_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wirepas Single-MCU SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/d7a/dedicated_area.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using a dedicated area in flash </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The internal flash is partitioned in multiple areas. Some of these areas are used for Wirepas usage like the bootloader or the firmware that cannot be moved. But the remaining part of flash can be freely partitioned by the application. Each area has a dedicated area ID and a given size. More information about area ids and its usage can be found in <a class="el" href="../../d1/d7a/dedicated_area.html#relmat1">[1]</a></p>
<p>The steps to realize are:</p><ol type="1">
<li>Defining a new partitioning in the <a class="el" href="../../db/dfd/config_mk_ini_file.html">Ini file</a> by adding a new area with flag user (i.e. flags = 0x00000014)</li>
<li>Access it through the <a class="el" href="../../df/d08/memory__area_8h.html#d8/d55/structapp__lib__memory__area__t">memory area library</a> handle from your application.</li>
<li>Application can also directly access the memory area without using the library, but it requires the application to know the absolute address of the area (not needed with the memory library)</li>
</ol>
<p>An example can be found from the <a class="el" href="../../d5/da9/provisioning_joining_node_2app_8c-example.html">provisioning joining node</a> with the code to access the memory area in storage_memarea.c and example of modified ini file in the scratchpad_ini folder</p>
<ul>
<li>Pros<ol type="1">
<li>Reserved persistent area for application can be quite large as long as enough room is reserved for receiving new scratchpads</li>
<li>Content of persistent data is kept unchanged when doing an OTAP of the application</li>
<li>Content of the persistent data area can be OTAP independently of the application. It is particularly handy if application needs a big configuration file to operate that can evolve during product life. Like a local schedule for a luminar to operate in an autonomous way.</li>
<li>Can be pre-flashed on the production line and later accessed by application (easy solution for initial provisioning)</li>
</ol>
</li>
<li>Cons<ol type="1">
<li>Flash partitioning must be modified and must be done carefully. Adding it just after the app may reduce the possibility of the application to expand later. Or defining a too big area may reduce the maximum scratchpad size the node can receive.</li>
<li>Application must manage validity of the content (with magic number for example).</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Related Material</h1>
<p><a class="anchor" id="relmat1"></a>[1] WP-RM-108 - OTAP Reference Manual</p>
<p><a class="anchor" id="relmat4"></a>[4] WP-RM-100 - Wirepas Connectivity Dual-MCU API Reference Manual</p>
<p><a class="anchor" id="relmat7"></a>[7] WP-RM-117 - Wirepas Connectivity Remote API Reference Manual </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/d7a/how_to_develop.html">How to Develop Application with SDK</a></li><li class="navelem"><a class="el" href="../../d5/d4c/recommendations.html">Recommendations</a></li><li class="navelem"><a class="el" href="../../dd/dde/persistent_memory.html">How to store data in persistent memory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
