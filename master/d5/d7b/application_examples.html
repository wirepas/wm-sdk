<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wirepas SDK: Application Examples and Tools</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../../select_version.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Wirepas SDK"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../wirepas_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <table class="table-title" cellspacing="0" cellpadding="0">
    <tbody>
      <tr style="height: 56px;">
        <td id="projectlogo"><img alt="Logo" src="../../small_logo.png"/></td>
        <td id="projectalign" style="padding-left: 0.5em;">
          <div id="projectname">Wirepas SDK
          </div>
        </td>
        <td id="selectversion" style="padding-left: 2em;">
          <select id="selectversion_list" onchange="javascript:handleVersionSelect(this)"></select>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d7b/application_examples.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Application Examples and Tools </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="source_folder"></a>
Application examples</h1>
<p>Applications exist in source/ subfolders, named after application name. Note that not all applications exist for every processor architecture.</p>
<p>Applications are categorized into two categories:</p><ul>
<li><a class="el" href="../../d5/d7b/application_examples.html#example_applications">Example applications</a> which can be used as a template for own application development. They are simple applications targeted to specific use case. They also include unitary apps.</li>
<li><a class="el" href="../../d5/d7b/application_examples.html#production_apps">Demos and production apps</a>. They are applications that are dedicated to specific purpose. Compared to example applications, they are relatively complex and mainly to be used as such.</li>
</ul>
<p><a class="anchor" id="example_applications"></a> Example and uninatry applications are:</p>
<table class="doxtable">
<tr>
<th>Application name</th><th>Description</th><th><p class="starttd">Notes</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><a class="el" href="../../de/dde/aes_2app_8c-example.html">aes</a> </td><td>Test software AES library</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../dd/d80/debug_2app_8c-example.html">debug</a> </td><td>Using debug prints</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d0/dd1/appconfig_2app_8c-example.html">appconfig</a> </td><td>Receiving application configuration</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d1/dac/basic_interrupt_2app_8c-example.html">basic_interrupt</a> </td><td>How to use interrupt service</td><td><p class="starttd">Only Nordic nRF52xx</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d7/d1c/ble_scanner_2app_8c-example.html">ble_scanner</a></td><td>How to receive BLE beacons </td><td><p class="starttd">Only 2.4GHz devices</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d3/d63/ble_tx_2app_8c-example.html">ble_tx</a> </td><td>How to transmit BLE beacons</td><td><p class="starttd">Only 2.4GHz devices</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d3/d9c/blink_2app_8c-example.html">blink</a> </td><td>Very simple blink/hello world application</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../db/d83/custom_app_2app_8c-example.html">custom_app</a> </td><td>Simple data transmission and reception</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../df/d91/inventory_app_router_2app_8c-example.html">inventory_app_router</a> </td><td>Inventory application using directed-advertiser for headnodes </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d3/d2f/inventory_app_tag_2app_8c-example.html">inventory_app_tag</a> </td><td>Inventory application using directed-advertiser for advertisers </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d7/db8/minimal_app_2app_8c-example.html">minimal_app</a> </td><td>Minimal app that just starts the stack</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d0/d36/nfc_2app_8c-example.html">nfc</a> </td><td>NFC peripheral usage</td><td><p class="starttd">Only Nordic nRF52xx</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d5/da9/provisioning_joining_node_2app_8c-example.html">provisioning_joining_node</a> </td><td>Using provisioning for a joining node</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../db/d30/provisioning_proxy_2app_8c-example.html">provisioning_proxy</a> </td><td>Using provisioning for a proxy node</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../da/d90/ruuvi_evk_2app_8c-example.html">ruuvi_evk</a> </td><td>Send sensor data  </td><td><p class="starttd">Only Ruuvitag</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d6/da1/scheduler_2app_8c-example.html">scheduler</a> </td><td>How to use <a class="el" href="../../dd/ddc/app__scheduler_8h.html">Application scheduler</a></td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d5/d87/shared_data_2app_8c-example.html">shared_data</a> </td><td>How to use <a class="el" href="../../d5/d74/shared__data_8h.html">shared_data.h</a></td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../dc/d2d/tinycbor_2app_8c-example.html">tinycbor</a> </td><td>use of the tiny cbor library</td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
</table>
<p><a class="anchor" id="production_apps"></a> Production apps are following:</p>
<table class="doxtable">
<tr>
<th>Application name</th><th>Description</th><th><p class="starttd">Notes</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><a class="el" href="../../da/d1e/dualmcu_app_2app_8c-example.html">dualmcu_app</a> </td><td>Implementation of dual-MCU API interface, used most commonly in sinks </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d2/d7a/positioning_app_2app_8c-example.html">positioning_app</a> </td><td>Application to acquire network data for the positioning use case </td><td><p class="starttd">Only Nordic nRF52xx</p>
<p class="endtd"></p>
</td></tr>
</table>
<p>This page contains following sections:</p><ul>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_app_c">app.c</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_config_mk">config.mk</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile">makefile</a></li>
</ul>
<h2><a class="anchor" id="source_app_c"></a>
app.c</h2>
<p>This file is present in all applications. Application init function and its application callback functions should be implemented here as defined in the <code>app.h</code> file.</p>
<h2><a class="anchor" id="source_config_mk"></a>
config.mk</h2>
<p><code>config.mk</code> file is used to configure application compilation. Here, the contents of that file have been described. Only fields that are common to all applications are described here! Some applications may have own, application-specific fields which are out of the scope of this documentation. For example, content of the file could be following:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Define a specific application area_id</span></div>
<div class="line">app_specific_area_id=0x8CEC79</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># App version</span></div>
<div class="line">app_major=1</div>
<div class="line">app_minor=0</div>
<div class="line">app_maintenance=0</div>
<div class="line">app_development=0</div>
</div><!-- fragment --><p>This page contains following sections:</p><ul>
<li><a class="el" href="../../d5/d7b/application_examples.html#app_specific_area_id">app_specific_area_id</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#app_version">Application version</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#app_target_boards">TARGET_BOARDS</a></li>
</ul>
<h2><a class="anchor" id="app_specific_area_id"></a>
app_specific_area_id</h2>
<p>Wirepas network supports <em>Over The Air</em> (OTAP) updates of devices on the network.</p>
<p>A network can contain heterogenous devices (different types of sensors, for example), so various different kinds of applications can coexist simultaneously in a network.</p>
<p>Even when upgrading a subset of nodes in the network (just nodes with a specific type of sensor, for example), all nodes will receive the update image. This is to ensure that all nodes on the network receive the update image, due to the multi-hop nature of the network. Consequently, it is crucial for a node to know if the received image, called a <em>scratchpad</em>, contains any updates for the node in question. This is the purpose of the application area ID.</p>
<p>More information about <em>Over The Air Protocol</em> can be found in <a class="el" href="../../de/d7a/how_to_develop.html#relmat1">[1]</a>.</p>
<p>Each new application <b>must</b> define its own <code>app_specific_area_id</code> in its <code>config.mk</code> file. It is a random 24-bit field that must have its most significant bit set to 1 (MSB to 0 is reserved for Wirepas):</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Define a specific application area_id</span></div>
<div class="line"><span class="preprocessor">app_specific_area_id=0x83744C</span></div>
</div><!-- fragment --><p>This specific area ID will be used in two different places:</p>
<ul>
<li>The <em>bootloader</em>, which contains a list of area IDs that it accepts, when a new scratchpad is processed. All the nodes that will be flashed with the image generated from an application build (containing the bootloader) will <em>only</em> accept updates of the application matching the specific area ID defined in <code>config.mk</code>.</li>
<li>In the <em>scratchpad generation tool</em> (genscratchpad.py), where it identifies the application scratchpad image. All the <code>*.otap</code> images generated from this application build will be only accepted by nodes flashed with a bootloader matching this area ID.</li>
</ul>
<p>The <code>app_specific_area_id</code> is only part of the scratchpad area id existing on the device. The whole scratchpad area id is composed on 4 bytes, as following:</p>
<table class="doxtable">
<tr>
<th>byte #</th><th>content </th></tr>
<tr>
<td>MSB byte 0</td><td>app_specific_area_id MSB byte 0 </td></tr>
<tr>
<td>byte 1</td><td>app_specific area id byte 1 </td></tr>
<tr>
<td>byte 2</td><td>app_specific area id LSB byte 2 </td></tr>
<tr>
<td>byte 3 LSB </td><td>hardware magic (see <a class="el" href="../../dc/db2/system_8h.html#a055fd8a1c1565c12af35cd82010b2594">app_lib_system_hardware_magic_e</a>) </td></tr>
</table>
<p>For example, if <code>app_specific_area_id</code> has value of <code>0x83744C </code> and used hardware is Nordic nRF52 (i.e. <a class="el" href="../../dc/db2/system_8h.html#a055fd8a1c1565c12af35cd82010b2594">app_lib_system_hardware_magic_e</a> is APP_LIB_SYSTEM_HARDWARE_MAGIC_NRF52832_SP_2), the resulted area id stored in the devices is: </p><div class="fragment"><div class="line">(0x83744C &lt;&lt; 8) | 3 = 0x83744C03</div>
</div><!-- fragment --><p>To summarize, in order to have unique scratchpad image on the device, the image must have*</p><ul>
<li>Unique <code>app_specific_area_id</code> OR</li>
<li>Unique processor architecture.</li>
</ul>
<p>If, however, same application is built on different board (but having same processor architecture), it will result same area id and otap mechanism cannot disinguish the images from others.</p>
<dl class="section note"><dt>Note</dt><dd>It is up to each customer to maintain its own set of <code>app_area_id</code> to avoid mismatch between its applications.</dd></dl>
<h2><a class="anchor" id="app_version"></a>
Application version</h2>
<p>Following definitions:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># App version</span></div>
<div class="line">app_major=1</div>
<div class="line">app_minor=0</div>
<div class="line">app_maintenance=0</div>
<div class="line">app_development=0</div>
</div><!-- fragment --><p>define the version of the application software. It is different from stack software and is application- specific. This information can be used to pinpoint which version of the application is running on the device.</p>
<h2><a class="anchor" id="app_target_boards"></a>
TARGET_BOARDS</h2>
<p>This configuration defines the boards which application supports. Configuration is optional.</p>
<dl class="section note"><dt>Note</dt><dd>If configuration is not present, it equals that it is supported on <em>every</em> board available. Usually that is not the case so it is better to ensure that only boards supported are listed here. Then, if incorrect board is tried to be compiled, it is ensured that compilation fails.</dd></dl>
<p>Example: </p><div class="fragment"><div class="line">TARGET_BOARDS := pca10056 pca10059 pca10040 wirepas_brd4254a silabs_brd4254a tbsense2 ublox_b204 promistel_rpi_hat</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile"></a>
makefile</h2>
<p>Application specific makefile contains application-specific build recipes. Here, the common features are documented:</p>
<p>This page contains following sections:</p><ul>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_app_printing">APP_PRINTING</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_app_scheduler">APP_SCHEDULER</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_cflags">CFLAGS</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_button">HAL_BUTTON</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_hw_delay">HAL_HW_DELAY</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_i2c">HAL_I2C</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_led">HAL_LED</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_persistent_memory">HAL_PERSISTENT_MEMORY</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_spi">HAL_SPI</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_hal_uart">HAL_UART</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_includes">INCLUDES</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_ldflags">LDFLAGS</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_libs">LIBS</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_shared_data">SHARED_DATA</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_provisioning">PROVISIONING</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_provisioning_proxy">PROVISIONING_PROXY</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_srcs">SRCS</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#source_makefile_sw_aes">SW_AES</a></li>
</ul>
<h2><a class="anchor" id="source_makefile_app_printing"></a>
APP_PRINTING</h2>
<p>Enabling of <a class="el" href="../../d9/d2a/uart__print_8h.html">uart_print.h</a> app debug prints can be done with this configuration.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Enable application debug prints</span></div>
<div class="line"><span class="preprocessor">APP_PRINTING=yes</span></div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_app_scheduler"></a>
APP_SCHEDULER</h2>
<p>Using of <a class="el" href="../../dd/ddc/app__scheduler_8h.html">app scheduler</a> can be done by using this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use App Scheduler. Declare 4 tasks</span></div>
<div class="line">APP_SCHEDULER=yes</div>
<div class="line">APP_SCHEDULER_TASKS=4</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_cflags"></a>
CFLAGS</h2>
<p>Introducing custom compilation flags for compilation can be done by extending this list.</p>
<p>Example: </p><div class="fragment"><div class="line">CFLAGS += -DOWN_FLAG</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Commonly this is used in many applications to propagate network address and network channel defined in <a class="el" href="../../d8/d1f/libraries_2config_8mk.html">config.mk</a> file to compilation flags: <div class="fragment"><div class="line"><span class="preprocessor"># Define default network settings</span></div>
<div class="line">CFLAGS += -DNETWORK_ADDRESS=$(default_network_address)</div>
<div class="line">CFLAGS += -DNETWORK_CHANNEL=$(default_network_channel)</div>
</div><!-- fragment --></dd></dl>
<h2><a class="anchor" id="source_makefile_hal_button"></a>
HAL_BUTTON</h2>
<p>Using of <a class="el" href="../../d7/d0e/button_8h.html">HAL for buttons</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># This application use HAL for buttons</span></div>
<div class="line"><span class="preprocessor">HAL_BUTTON=yes</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>: in order for application to be able to drive buttons, they must be defined in specific board. </dd>
<dd>
This option is supported only on nRF52 architectures.</dd></dl>
<h2><a class="anchor" id="source_makefile_hal_hw_delay"></a>
HAL_HW_DELAY</h2>
<p>Using of <a class="el" href="../../d2/d4c/hw__delay_8h.html">HAL for hardware delay</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line">HAL_HW_DELAY=yes</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_hal_i2c"></a>
HAL_I2C</h2>
<p>Using of <a class="el" href="../../d5/daf/i2c_8h.html">HAL for I2C interface</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line">HAL_I2C=yes</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This option is supported only on nRF52 architectures.</dd></dl>
<h2><a class="anchor" id="source_makefile_hal_led"></a>
HAL_LED</h2>
<p>Using of <a class="el" href="../../db/da0/led_8h.html">HAL for led driving</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># This application use HAL for leds</span></div>
<div class="line"><span class="preprocessor">HAL_LED=yes</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>: in order for application to be able to drive LEDs, they must be defined in specific board.</dd></dl>
<h2><a class="anchor" id="source_makefile_hal_persistent_memory"></a>
HAL_PERSISTENT_MEMORY</h2>
<p>Using of <a class="el" href="../../dd/d36/mcu_2hal__api_2persistent_8h.html">HAL for persistent memory</a> can be done by this flag.</p>
<dl class="section note"><dt>Note</dt><dd>You need to define <code>-DUSE_PERSISTENT_MEMORY</code> by using <a class="el" href="../../d5/d7b/application_examples.html#source_makefile_cflags">CLAGS</a> option.</dd></dl>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use persistent memeory</span></div>
<div class="line">HAL_PERSISTENT_MEMORY=yes</div>
<div class="line">CFLAGS += -DUSE_PERSISTENT_MEMORY</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_hal_spi"></a>
HAL_SPI</h2>
<p>Using of <a class="el" href="../../da/d87/spi_8h.html">HAL for SPI interface</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line">HAL_SPI=yes</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This option is supported only on nRF52 architectures.</dd></dl>
<h2><a class="anchor" id="source_makefile_hal_uart"></a>
HAL_UART</h2>
<p>Using of <a class="el" href="../../d3/dfa/mcu_2hal__api_2usart_8h.html">HAL for UART interface</a> can be done by this flag.</p>
<p>Example: </p><div class="fragment"><div class="line">HAL_UART=yes</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>: in order for application to be able to UART, they must be defined in specific board.</dd></dl>
<p>There is also related flag <code>UART_USE_DMA</code> that can be used to enable DMA functionality.</p>
<p>Example: </p><div class="fragment"><div class="line">HAL_UART=yes</div>
<div class="line">UART_USE_DMA=yes</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_includes"></a>
INCLUDES</h2>
<p>Extending to to include folders for include search paths can be done by extending this list.</p>
<p>Example: </p><div class="fragment"><div class="line">INCLUDES +=</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_ldflags"></a>
LDFLAGS</h2>
<p>Introducing custom linker flags for ld can be done by extending this list.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#Link standard C math library</span></div>
<div class="line"><span class="preprocessor">LDFLAGS += -lm</span></div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_libs"></a>
LIBS</h2>
<p>Introducing of precompiled libraries (.a files) for compilation can be done by extending this list.</p>
<p>Example: </p><div class="fragment"><div class="line">LIBS +=</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_provisioning"></a>
PROVISIONING</h2>
<p>Using of <a class="el" href="../../d0/dae/provisioning_8h.html">provisioning library</a> can be done by using this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use Provisioning</span></div>
<div class="line"><span class="preprocessor">PROVISIONING=yes</span></div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_provisioning_proxy"></a>
PROVISIONING_PROXY</h2>
<p>Using of <a class="el" href="../../d0/dae/provisioning_8h.html">provisioning library (for the existing node)</a> can be done by using this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use Provisioning Proxy</span></div>
<div class="line"><span class="preprocessor">PROVISIONING_PROXY=yes</span></div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_shared_data"></a>
SHARED_DATA</h2>
<p>Using of <a class="el" href="../../d5/d74/shared__data_8h.html">shared data library</a> can be done by using this flag.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use Shared Data</span></div>
<div class="line"><span class="preprocessor">SHARED_DATA=yes</span></div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_srcs"></a>
SRCS</h2>
<p>Introducing of new source files can be done by extending this list.</p>
<p>Example: </p><div class="fragment"><div class="line">SRCS +=</div>
</div><!-- fragment --><h2><a class="anchor" id="source_makefile_sw_aes"></a>
SW_AES</h2>
<p><a class="el" href="../../db/dcb/aes_8h.html">Software AES library</a> can be enabled by using this configuration.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor"># Enable software AES</span></div>
<div class="line"><span class="preprocessor">SW_AES=yes</span></div>
</div><!-- fragment --><h1><a class="anchor" id="tools_folder"></a>
Tools</h1>
<p>This folder contains various tools, mainly implemented in Python, used during build process of the application.</p>
<p>This page contains following sections:</p><ul>
<li><a class="el" href="../../d5/d7b/application_examples.html#genscratchpad_py">genscratchpad.py</a></li>
<li><a class="el" href="../../d5/d7b/application_examples.html#config_mk_ini_file">INI_FILE</a></li>
</ul>
<h2><a class="anchor" id="genscratchpad_py"></a>
genscratchpad.py</h2>
<p>This tool, used by the Makefile, allows the scratchpad binary generation for the OTAP update. It uses the <code>ini</code> file in the same directory</p>
<h2><a class="anchor" id="config_mk_ini_file"></a>
INI_FILE</h2>
<p>All scratchpad images received <em>Over The Air</em> are compressed and encrypted.</p>
<p>The bootloader authenticates the image and decrypts it, so authentication and encryption keys used to generate a scratchpad must match the ones stored in the bootloader.</p>
<p>The list of keys stored in bootloader can be configured at the end of <code>tools/scratchpad_&lt;mcu&gt;.ini</code> file. The bootloader can contain several keys and will decrypt a received scratchpad, if it can be authenticated with any of the listed keys.</p>
<p>By default, each application uses the same <code>.ini</code> file stored in <code>tools/scratchpad_&lt;mcu&gt;.ini</code> but it can be copied to the application folder and modified as needed. The new <code>.ini</code> file can be specified from the application as following:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Define a specific scratchpad ini</span></div>
<div class="line"><span class="preprocessor">INI_FILE = $(APP_SRCS_PATH)/scratchpad_custom.ini</span></div>
</div><!-- fragment --><p>The scratchpad generated from an application build use the key named <code>default</code> from the <code>.ini</code> file. It can be changed by adding the <code>&ndash;keyname</code> option to the invocation of <code>genscratchpad.py</code> script from makefile. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
